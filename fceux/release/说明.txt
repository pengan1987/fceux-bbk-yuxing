感谢各位提取各种ROM的大神,虽然我也不知道各位是谁.
感谢 狙击手、TPU、Mervin、钳工、惊风 、秋风红叶等前期的数据分析等所有准备工作
感谢 钳工大神 提供的 1.LPC 语音解码源码，得以实现软驱一号语音功能. 2.普里奇 源码
感谢 惊风大神 提供的 VirtuaNESex 模拟器源码,在新模拟器fceux上的主要功能都是参考了他的源码才得以实现和完善
感谢 群友 [陽光院　景仁] 的测试和BUG报告
感谢 群友 king6502(QQ:3230465971) 1.提供解决软驱一号中文DOS下显示卡通无效的方法/按键处理 2.科王3000所有ROM IO相关第一手资料及开发调试阶段详细的讲解
感谢 轻舞飘扬、富安华科电子提供集成块BIOS版本步步高软驱一号并读出BIOS.BIN固件

QQ:282968177 STAR
交流群:软驱一号 530229478

BUG报告(或提供相关信息)和修复进度请看后文的 BUG报告: 部分,可以供对技术有兴趣的玩家参考

注意:
某些情况下,某些ROM用的键盘可能是手柄接口,这时会有冲突,用了键盘,就不能用手柄,这时可尝试菜单Help下的 手柄接口-连接手柄(学习机加载游戏时用)/键盘/鼠标 等菜单(如果有的话:如裕兴VCD ROM,运行WPS.BIN启动完成后就需要切换)
模拟器运行时,如果要显示鼠标指针,请按下鼠标左键的同时,再按一次右键就可以显示指针了.模拟器的Config菜单有很多设置,大家可以去自己发现.
调试功能说明请查看文档后面的 调试功能 一节
不能在 软驱一号/裕兴 ROM里玩软盘里的(部分小于等于40K也许可以)游戏,玩游戏直接下载并打开 .nes 的游戏
读/写盘时不要切换镜像或关闭模拟器,否则模拟器可能崩溃
如果要保护软盘镜像不被破坏(保存/格式化),可以把镜像转换成IMZ格式(用压缩工具压缩成ZIP文件,再改扩展名为IMZ)
软盘镜像只识别扩展名:IMA/IMZ/IMG

软驱一号 请使用 BBGDOS3.0+BBGCDOS2.0
软驱一号 使用步步高模拟:下载群里的 步步高软驱一号模拟器->打开bbk_bios10.rom->拖入003.img
软驱一号 要使用微机通迅卡 需要在模拟器目录下创建 BBKRoot 目录,且必须要有 BBGDOS.SYS/COMMAND.CMD,如果存在 NoFloppy 这个文件,则不会使用软驱.如果不想再用 微机通迅卡,则删除 BBKRoot 就可以了.

裕兴 V8.0的rom只能读写720KB格式的软盘
裕兴 学DOS DIR命令后显示彩色的乱码是因为有中文文件名
裕兴 多媒体软件中的语音在很长的时间内是不可能实现的功能
裕兴 要运行裕兴VCD的教学软件,先打开裕兴VCD的ROM,再拖入VCD文件(光盘PROGRAMS目录下的BIN文件).如果拖入文件后一直停留在VCD界面,请点菜单上的Power硬件重置,如果硬件重置也不行,请重新加载VCD ROM或重启模拟器再试.

2021/07/08
裕兴 添加裕兴VCD鼠标功能.

2021/07/08
软驱一号 微机通迅卡 所有主要功能已完成(除读/写扇区,文件改名外).
软驱一号 微机通迅卡 从软件退出到DOS后的路径有乱码 [已修复]文件查找/获取当前目录命令返回时的 HBUF应该指向0x417,不能修改原始的 HBUF
软驱一号 050.img同类软件无法正常运行 [已修复]0xFFFA~0xFFFF 没有写保护,IRQ被修改了
软驱一号 修复路径相关的功能(..上层目录,\根目录)

2021/07/03
软驱一号尝试用 微机通迅卡 加载BBGDOS.SYS成功,但后续流程还不正常,使用 微机通迅卡 读取文件的BIOS $5800 0D号调用参数和返回值的意义暂不明确.

2021/07/01
裕兴VCD ROM键盘驱动完成,修复按键映射,所有教学软件按键正常(Caps Lock,Num Lock,F1~F12,数字键盘的几个键没有找到映射关系).

2021/06/30
裕兴VCD ROM键盘驱动完成,有部分键无法使用.

2021/06/29
裕兴的大部分VCD教学软件和部分游戏(小容量)可以正常运行了,但键盘用的不是学习机的接口,还要重新驱动
HexEditor添加了手动切ROM/RAM的功能,PPU View添加了查看CHR ROM的功能,便于调试

2021/06/19
科王3000实现部分小尺寸VCD格式(扩展名CDV)的加载运行,拖入科王3000 ROM后再拖入CDV文件.
修正了软件复位逻辑

2021/06/19
初步实现 科王3000 ROM正常运行,软盘读写正常,键盘已驱动成功
添加最近加载过的 镜像列表(主菜单->ImgList),打开当前ROM/IMG文件夹(主菜单->Help)

2021/06/10
支持 普里奇 模拟(只支持128KBPS及以上,16位双声道44100采样的MP3文件,可用工具转换),只要MP3没问题,应该可以连续播放. 键盘方向键: 左/右键(减增20分之1时间) 下/上键(减增5分之1时间)  HOME键:暂停/继续

2021/06/09
完善HexEditor功能,修复PPUViewer
裕兴 修改为DENDY制式运行
裕兴 修复XP系统下键盘无法使用

2021/06/04
软驱一号 003/015等盘的中间一行乱码可通过菜单 Config->Region->Dendy 解决(现已改成加载ROM时自动设置)
软驱一号 完全不用超频的方法解决了中文显示问题.
软驱一号 如果程序退出后,输入法栏有乱码,输入cls清屏就显示正常了.

2021/06/01
模拟器代码换成了最新的Fceux2.3版(移除了LUA和TAS Editor),代码结构做了调整.
软驱一号 修复鼠标按下后连续点击,现在软件不再连接点击了(034~036,041~044号镜像可测试)
软驱一号 找到了以前(非大量超频)模拟器进中文就花屏的根本原因.改进后不再大量超频,按键盘不会连接打出同一字符,声音也正常,测试了部分软件正常.

2021/05/07
软驱一号 修复播放下一条语音时前一条还没播放完,修复部分语音只播放一部分.
软驱一号 添加语音支持(还需要群友测试)

2019/12/01
软驱一号 可以正常清屏

2019/11/20
裕兴 裕兴 v9.2/v9.2F 的ROM可以正常运行
软驱一号 可以正常玩部分游戏
软驱一号 支持更多的软件
软驱一号 依赖BIOS方式的软件鼠标可正常使用
软驱一号 修复非16行中文(gameshell)显示乱码问题
软驱一号 修复中文DOS(BBGCDOS 2.0有效)下显示卡通无效的问题
软驱一号 修复几个无效的按键,可以切换输入法了

2019/11/13
软驱一号 中文系统初步能正常显示中文(BBGCDOS 2.0),WPS文字处理程序也可正常工作,输入法的切换有问题,可能是键盘驱动有问题
软驱一号 配置->计时-> Overclocking 中的选项直接影响软驱一号中文系统的正常显示,数字我已调到最佳
移除了LUA脚本支持

2019/10/31
裕兴 修正裕兴鼠标驱动,定位更精确
裕兴 修复看图拼词可以正常进入
裕兴 裕兴 v9.2/v9.2F 的ROM运行不正常,只显示VCD画面,已修复

2019/09/14
软驱一号 将VirtuaNESex步步高实现的功能移植,已支持模拟BBK 1.0 ROM(没有2.0ROM供测试),支持写软盘(格式化无效)
屏蔽 Alt+F4,阻止关闭窗口
支持加载IMZ压缩软盘镜像,加载后可写,但不会写入文件
裕兴 适配两个手柄口设置为鼠标,可以使用鼠标的软件增多
裕兴 支持软盘格式化

2019/09/10
清除了所有模拟器默认快捷键
裕兴 新增鼠标驱动,部分软件检测不到鼠标

BUG修复
裕兴 主界面鼠标指针正常了
裕兴 修复学DOS磁盘命令死机
裕兴 修复BASICY读写文件
裕兴 修复名片管理儲存的.DAT有錯誤

2019/09/05
裕兴 完善软盘的读写功能,可读取/写入文件,D型/98型正常工作,但不可以执行格式化操作
裕兴 支持拖放软盘镜像到已运行的裕兴ROM窗口,直接生效,不需要重启
裕兴 可以正常运行群文件中 裕兴镜像 下学习软件/工具软件 的多数软盘镜像,基本上裕兴自己的软件是可以正常运行的
裕兴 如果模拟器运行后没有软件镜像,会在模拟器目录下生成一个YuXing.img的临时镜像,可读写,模拟器上可正常使用

调试功能:
打开调试窗口后可用的快捷键:
F5  暂停/运行
F10 步过,对应按钮 Step Over
F11 步入,对应按钮 Step Into
双击 Symble 下的条目,会定位到相应的汇编代码

可以增加的功能:
显示当前扫描线的选项,IRQ触发位置,NMI触发位置

模拟器中不完善的功能:
软驱一号:
031.应用题大全 还有乱码
鼠标:鼠标功能虽然实现了,但不是通过mouse.cmd驱动实现的,只是用了欺骗的方法(mouse.cmd安装时的应答方式有点复杂,放弃了分析),直接利用BIOS(0x5ff2,0x5ff3)中的功能实现的(多数软件可以使用鼠标),
但要验证mouse.cmd驱动安装成功的软件,鼠标(或软件)无法正常使用
中文系统下,主程序在往$2007写连续数据里,有可能被NMI和IRQ中断打断(写了$2006,或者同时写$2007),这就是花屏的主要原因.现我比较完美的解决方法是(最开始是采用模拟器加速(扫描线0开始之前,全部加速
加入了8192条扫描线周期去执行CPU指令,基本上测试过的中文软件都正常了,以保证主程序写$2007在不触发NMI和IRQ时完成,但声音不正常,键盘输入也可能不正常).利用3个数组结构保存3个状态下$2006/$2007的
状态(开始地址$2006,当前地址$2007,当前0号bank的页号),写$2007时,把地址指针改成当前状态,bank也切到上次保存的状态,让主程序/NMI/IRQ保持独立的状态,这样对$2007写入时的地址就基本正常了,中文很好
的显示,也不影响输入和声音.因为模拟器的优势是我可以知道CPU当前是在执行主程序还是NMI/IRQ中断程序.

所以我猜测,软驱一号有可能还有一个没发现的端口,用这个端口去通知主机,要写$2007了,不要进入NMI和IRQ,等写完了再进入. 如果软驱一号用正常的方法话,这模拟器不需要特别的方法,但我测试的3个模拟器都不正常,
可以肯定它不是按FC的套路来的.

BUG报告(或提供相关信息):
king6502(QQ:3230465971)
20210620
调试器下PPU $2000~ 后的读写断点,只能用一次,下次要关闭模拟器进程再启动才可以
20210609 
bbgdos.sys 1.0的模拟器是引导不了的(提示没有command,015号等)
游戏时3.0的DOS有问题(实机是这样),写显存的一段出问题
PPUView 显示有问题(不能反映当前PPU的内容)[已修复]

20210605 Michael Xia(QQ:29845607):(测试环境 XP系统)
1.使用裕兴ROM时，一旦拖入切换新磁盘IMG，会出现键盘失效的情况。步步高无此问题[已修复:裕兴的键盘驱动用的是DirectX8接口,XP不安装DirectX8,无法正常使用,改成DirectX7接口就可以了]
2.另外，可不可以麻烦把裕兴的ROM默认也定为DENDY制式？[已修复(NTSC会导致音乐节奏变快,PAL会例某些软件无法正常运行)]

STAR:
202010701
裕兴VCD ROM如果加载默认的IMG镜像可能会崩溃
软驱一号 copy 命令复制文件会有问题．有些扇区写入数据会出现511个字节(这是写文件分配表的字节数),数据区应该为512字节.连接写多个512字节后会出现一次写511字节的.分布在两个不同的函数里调用.

FCEUX:
setprg2r 只映射 $800(2K) 长度的地址,PAGES=ROMESize/0x800  setprg4r 只映射 $1000(4K) 长度的地址,PAGES=ROMESize/0x1000
setprg8r 只映射 $2000(8K) 长度的地址,PAGES=ROMESize/0x2000  setprg16r 只映射 $4000(16K) 长度的地址,PAGES=ROMESize/0x4000
setprg32r 只映射 $8000(32K) 长度的地址,PAGES=ROMESize/0x8000
X6502_IRQBegin 的 FCEU_IQTEMP:只中断一次  FCEU_IQEXT:要手动调用 X6502_IRQEnd 才会停止